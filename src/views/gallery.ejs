<% title="Discover" %>

    <div class="container-fluid py-5 h-100">
        <div class="px-lg-5">

            <div class="row py-5">
                <div class="col-lg-12 mx-auto">
                    <div class="d-flex row justify-content-between text-dark px-5 py-3 shadow-sm rounded banner">
                        <div class="col-6 d-flex row justify-content-end">
                            <h1 class="display-1">Discover</h1>
                        </div>
                        <div class="col-4">
                            <div class="d-flex justify-content-end">
                                <h3 class="my-4">Upload your works.</h3>
                            </div>
                            <div class="d-flex justify-content-end">
                                <a href="/post" class="btn btn-primary btn-rounded">Create New Post</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End -->

            <div class="row">

                <!--Modal: Name-->
                <div class="modal fade" id="postModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                    aria-hidden="true">
                    <div class="modal-dialog modal-lg" role="document">

                        <!--Content-->
                        <div class="modal-content d-flex justify-content-center">

                            <!--Body-->
                            <div class="modal-body mb-0 p-0">
                                <div class="embed-responsive embed-responsive-16by9 z-depth-1-half">
                                    <img class="embed-responsive-item" id="modalCover" src="" allowfullscreen=""
                                        style="height:100%; width: 100%; object-fit: cover; overflow-y: scroll;">
                                </div>
                            </div>

                            <div class="modal-footer justify-content-center">
                                <button type="button"
                                    class="btn btn-outline-primary btn-rounded btn-md ml-4 waves-effect waves-light"
                                    data-mdb-dismiss="modal">Close</button>
                            </div>
                        </div>
                        <!--/.Content-->

                    </div>
                </div>
                <!--Modal: Name-->

                <% post.forEach((post)=> { %>
                    <!-- Gallery item -->
                    <div class="col-xl-3 col-lg-4 col-md-6 mb-4 post">
                        <div class="bg-white rounded shadow-sm">
                            <a>
                                <img src="<%- post.img%>" alt="" class="img-fluid card-img-top z-depth-1 imgUrl"
                                    id="imgUrl" style="height: 12rem; width: 18rem; object-fit: cover;"
                                    data-mdb-toggle="modal" data-mdb-target="#postModal" data-img-path="<%- post.img%>">
                            </a>
                            <div class="px-3 pt-3 pb-1">
                                <h5>
                                    <a href="#" class="text-dark">
                                        <%- post.title %>
                                    </a>
                                </h5>
                                <% postUser.forEach(user=> {%>
                                    <% let userId=JSON.stringify(user._id), authorId=JSON.stringify(post.authorId) %>
                                        <% if(userId==authorId) {%>
                                            <p class="pb-0">
                                                <%- `${user.firstName} ${user.lastName}` %>
                                            </p>
                                            <% }%>
                                                <%}) %>

                            </div>
                        </div>
                    </div>
                    <% }) %>
                        <!-- End -->
                        <div class="d-flex justify-content-center py-5 text-right">
                            <a href="#" class="btn btn-dark px-5 py-3 text-uppercase">Show me more</a>
                        </div>

                        <script>
                            $(document).ready(function () {
                                $('.imgUrl').on('click', () => {
                                    console.log($('.imgUrl').data('imgPath'))
                                    $('#modalCover').attr('src', $('.imgUrl').data('imgPath'))
                                })
                            });
                            // function getImgUrl() {
                            //     let img = document.querySelector('.imgUrl');
                            //     let modal = document.querySelector('#modalCover');
                            //     console.log(img.dataset.modal)
                            //     console.log(modal.src)
                            //     modal.src = img.dataset.modal;
                            // }
                        </script>